<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <script type="text/javascript" src="http://use.typekit.com/mij5ycn.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <link href="http://sklise.s3.amazonaws.com/pictos/pictos.css" rel="stylesheet" type="text/css"></link>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/vendor/jquery.min.js" type="text/javascript"></script>
  <script src="/js/vendor/underscore-min.js" type="text/javascript"></script>
  <script src="/js/vendor/backbone-min.js" type="text/javascript"></script>
  <script src="/js/vendor/mustache.js" type="text/javascript"></script>
  <script src="/nowjs/now.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/js/models.js"></script>
  <script src="/js/collections.js"></script>
  <script src="/js/views.js"></script>
  <script src="/js/itpirl.js"></script>
  <script src="/js/chat.js"></script>
  <script>
    // Implement this stuff with Backbone.js
    $(document).ready(function(){
      $('#feedback-button').click(function(){
        event.preventDefault();
        $feedbackForm = $('#feedback-form');
        if($feedbackForm.html().length == 0) {
          $feedbackForm.append(Mustache.render($('#feedback-form-template').html(), {name:now.name}));
        } else {
          $feedbackForm.empty();
        }
      });

      $('#feedback-send').live('click', function(){
        event.preventDefault();
        data = {
          name:$('#feedback-name').val(),
          message:$('#feedback-message').val()
        }
        $.post('/feedback/new', data, function(response){
          $('#feedback-form').empty();
        });
      });
    });
  </script>

  <title>ITPIRL</title>
</head>
<body>
  <div id="wrapper">

    <div id="menu-window">
      <div id="heading">
        <h1>Shep</h1>
        <h3><a href="https://github.com/stevenklise/itpirl/blob/master/readme.md">v0.8.1</a></h3>
      </div>

      <div class="introduction">
        <p>Shep is a chat bot and he's </p>
        <p><strong>PRIVACY:</strong> This site is private only in the sense that probably no one knows about it. All content is currently publicly accessible. So watch ur lolz.</p>
        <p><strong>LICENSE:</strong> <a href="https://github.com/stevenklise/itpirl/blob/master/License.md" target="_blank">MIT License</a>.</p>
        <p><strong>CODE:</strong> Available on <a href="https://github.com/stevenklise/itpirl" target="_blank">Github</a>.</p>
        <div id="feedback">
          <button id="feedback-button"><span class="pictos">W</span> Leave Feedback</button>
          <div id="feedback-form"></div>
        </div>
      </div>

      <div id="footer">

      </div>
    </div>

    <div id="chat-window">

      <div id="chat-toolbar">
        <ul id="chat-room-list">
          <li class="current-room"><div class="room-status-icon">q</div> <div class="room-name">ITP<div class="underline"></div></div></li>
          <li><div class="shep-icon"></div> <div class="room-name">SHEP<div class="underline"></div></div></li>
          <li id="add-room"><div class="room-menu-icon pictos">l</div></li>
        </ul>
      </div>

      <div id="chat-log-container">
        <ul id="chat-log">
        </ul>
      </div>

      <form id="new-message">
        <input id="chat-name" />
        <textarea id="new-message-input" autofocus rows=1></textarea>
        <script>
          // This is inline so that it loads so fast.
          if (!("autofocus" in document.createElement("textarea"))) {
            document.getElementById("new-message-input").focus();
          }
        </script>
      </form>
    </div>

  </div>

  <script type="text/template" id="messages-template">
    <div id="chat-log-container">
      <ul id="chat-log">
      </ul>
    </div>
    <form id="new-message">
      <div id="ask-shep" class="pictos">p</div>
      <textarea id="new-message-input" rows=1></textarea>
    </form>
  </script>

  <script type="text/template" id="system-message-template">
  <li class="{{ classes }}">
    <div class="message-time">{{ time }}</div>
    <div class="system-message">{{{ message }}}</div>
  </li>
  </script>

  <script type="text/template" id="message-template">
  <li class="{{ classes }}">
    <div class="chatter">{{ name }}</div>
    <div class="message-time">{{ time }}</div>
    <div class="message">{{{ message }}}</div>
  </li>
  </script>

  <script type="text/template" id="events-template">
    <ul>
    </ul>
  </script>

  <script type="text/template" id="event-template">
    <div>
      <span class="time">{{ startTime }}-{{ endTime }}</span> {{ title }} 
      <a class="calendar-link pictos" title="Open in Google Calendar" target="_blank" href="{{ url }}">\</a>
      <div class="details">
        <p class="location">{{ location }}</p>
        <div>{{ description }}</p>
      </div>
    </div>
  </script>

  <script type="text/template" id="feedback-form-template">
    <div>
      <label>Your Name:</label>
      <input type="text" id="feedback-name" value="{{ name }}"/>
      <label>Feedback:</label>
      <textarea id="feedback-message"></textarea>
      <button id="feedback-send">Send Feedback</button>
    </div>
  </script>
</body>
</html>