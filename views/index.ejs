<script>
  // This is inline so that it loads so fast.
  if (!("autofocus" in document.createElement("textarea"))) {
    document.getElementById("new-message-input").focus();
  }

  window.onbeforeunload = signOut;
  function signOut() {
    now.signOut();
  }
</script>

<div id="menu-window">
  <div id="heading">
    &nbsp;
  </div>

  <div class="introduction">
    <p>Shep is ITP's chat bot, he's here for you. He answers questions, remembers things and sometimes makes jokes.</p>

    <p>Click the tab marked "SHEP" to speak directly with Shep. Click the menu tab to create or join new channels.</p>

  </div>

  <div id="calendar">
    <h3>Calendar</h3>
    <ul>
    </ul>
  </div>

  <div id="feedback-box"></div>

  <div id="footer">
    <p>
      <a href="https://github.com/stevenklise/shep.info/blob/master/readme.md">v2.0.0-a1</a>
    </p>
    <p><strong>This is a public site</strong> &#x2605;
      <a href="https://github.com/stevenklise/shep.info" target="_blank">Source</a>
    </p>
  </div>
</div>

<div id="chat-window">
  <div id="loading-screen">
    <h2>Hold yer horses, chat is loading<span id="trailing-dots">.</span></h2>
    <script>
      var animating;
      $(document).ready(function(){
        setInterval(moveDots, 1000);
        function moveDots() {
          $dots = $('#trailing-dots');
          text = $dots.text();
          numDots = text.length;

          if(numDots < 4) {
            $dots.text(text + '.');
          }
          else {
            $dots.text('.');
          }
        }
      });
    </script>
  </div>
</div>

<script type="text/template" id="chat-window-template">
  <div id="chat-toolbar"></div>
  <div id="chat-log-container"></div>
  <ul id="user-list"></ul>
  <form id="new-message"></form>
</script>

<script type="text/template" id="channels-template">
<ul class="chat-room-list">
  <li class="channel-menu-button"><img src="http://shep.info.s3.amazonaws.com/276.png" style></li>
</ul>
</script>

<script type="text/template" id="channel-template">
  <div class="room-status-icon {{#isShep}}shep-icon{{/isShep}}">&nbsp;</div> <div class="room-name">{{ name }}<div class="underline"></div></div>
</script>

<script type="text/template" id="messages-template">
  <ul class="chat-log"></ul>
</script>

<script type="text/template" id="new-message-template">
  <input class="chat-name" value="{{ name }}"/>
  <div class="new-message-input">
    <pre><span></span><br></pre>
    <textarea></textarea>
  </div>
</script>

<script type="text/template" id="system-message-template">
  <div class="message-time">{{ time }}</div>
  <div class="system-message">{{{ message }}}</div>
</script>

<script type="text/template" id="chat-message-template">
  <div class="chatter">{{ name }}</div>
  <div class="message-time">{{ time }}</div>
  <div class="message">{{{ message }}}</div>
</script>

<script type="text/template" id="action-message-template">
  <div class="message-time">{{ time }}</div>
  <div class="action-message"><span class="chatter"><span style="font-style:normal;">â˜…</span> {{ name }}</span> {{{ message }}}</div>
</script>

<script type="text/template" id="feedback-template">
  <button class="feedback-button" tabindex="-1"><img src="http://shep.info.s3.amazonaws.com/140.png" class="icon"> Leave Feedback</button>
  <div id="feedback-form"></div>
</script>

<script type="text/template" id="feedback-form-template">
  <div>
    <label>Your Name:</label>
    <input type="text" id="feedback-name" value="{{ name }}"/>
    <label>Feedback:</label>
    <textarea id="feedback-message"></textarea>
    <button class="feedback-send">Send Feedback</button>
  </div>
</script>

<script type="text/template" id="calendar-event-template">
  <li>
    <span class="when">{{dateString start}} to {{dateString end}}</span>
    <span class="title"><a href="{{link}}">{{title}}</a></span>
  </li>
</script>

<script src="http://www.google.com/calendar/feeds/rj39klpe7dkg03r82dv5ip8rco%40group.calendar.google.com/public/full?alt=json-in-script&callback=insertAgenda&orderby=starttime&max-results=15&singleevents=true&sortorder=ascending&futureevents=true"></script>